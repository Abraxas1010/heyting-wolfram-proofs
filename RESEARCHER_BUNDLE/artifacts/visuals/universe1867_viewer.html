<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Universe 1867: Wolfram → Lean Bridge</title>
  <style>
    :root {
      --bg: #000000;
      --card: #0a0a0a;
      --border: rgba(255,255,255,0.1);
      --text: #fafafa;
      --dim: #9ca3af;
      --accent: #60a5fa;
      --wolfram: #dd4a22;
      --lean: #3b82f6;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      min-height: 100vh;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 8px;
      font-size: 24px;
    }
    h1 .wolfram { color: var(--wolfram); }
    h1 .lean { color: var(--lean); }
    h1 .arrow { color: var(--dim); margin: 0 8px; }
    .subtitle {
      text-align: center;
      color: var(--dim);
      font-size: 12px;
      margin-bottom: 24px;
    }
    .subtitle a { color: var(--accent); }

    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 40px;
      margin-bottom: 24px;
      padding: 16px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
    }
    .stat {
      text-align: center;
    }
    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--accent);
    }
    .stat-label {
      font-size: 11px;
      color: var(--dim);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 24px;
    }

    .panel {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      overflow: hidden;
    }
    .panel-header {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .panel-header.wolfram { border-left: 3px solid var(--wolfram); }
    .panel-header.lean { border-left: 3px solid var(--lean); }
    .panel-header h3 {
      font-size: 14px;
      font-weight: 600;
    }
    .panel-header .badge {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 4px;
      background: rgba(255,255,255,0.1);
    }
    .panel-content {
      padding: 16px;
    }
    .panel-content img {
      width: 100%;
      border-radius: 4px;
    }

    .code-block {
      background: #111;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 12px;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
      font-size: 11px;
      line-height: 1.6;
      overflow-x: auto;
      white-space: pre;
    }
    .code-block .comment { color: #6b7280; }
    .code-block .keyword { color: #c084fc; }
    .code-block .string { color: #fbbf24; }
    .code-block .type { color: #34d399; }
    .code-block .number { color: #60a5fa; }

    .evolution-strip {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 16px;
      margin-bottom: 24px;
    }
    .evolution-strip h3 {
      font-size: 14px;
      margin-bottom: 12px;
    }
    .frames {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 8px;
    }
    .frame {
      flex-shrink: 0;
      width: 120px;
      text-align: center;
    }
    .frame img {
      width: 100%;
      border-radius: 4px;
      border: 1px solid var(--border);
    }
    .frame-label {
      font-size: 10px;
      color: var(--dim);
      margin-top: 4px;
    }

    .theorem-box {
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.3);
      border-radius: 6px;
      padding: 12px;
      margin-top: 12px;
    }
    .theorem-box h4 {
      font-size: 12px;
      color: var(--lean);
      margin-bottom: 8px;
    }

    .back-link {
      display: inline-block;
      color: var(--dim);
      font-size: 12px;
      text-decoration: none;
      margin-bottom: 16px;
    }
    .back-link:hover { color: var(--accent); }

    .rule-display {
      background: rgba(221, 74, 34, 0.1);
      border: 1px solid rgba(221, 74, 34, 0.3);
      border-radius: 6px;
      padding: 16px;
      text-align: center;
      margin-bottom: 12px;
    }
    .rule-display .rule {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
      color: var(--wolfram);
    }
    .rule-display .label {
      font-size: 10px;
      color: var(--dim);
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <a href="index.html" class="back-link">← Back to Visualizations</a>

  <h1>
    <span class="wolfram">Wolfram Physics</span>
    <span class="arrow">→</span>
    <span class="lean">Lean 4</span>
  </h1>
  <p class="subtitle">
    Universe 1867 from the <a href="https://www.wolframphysics.org/universes/wm1867/" target="_blank">Registry of Notable Universes</a>
  </p>

  <div class="stats-bar">
    <div class="stat">
      <div class="stat-value">7</div>
      <div class="stat-label">Generations</div>
    </div>
    <div class="stat">
      <div class="stat-value">74</div>
      <div class="stat-label">Events</div>
    </div>
    <div class="stat">
      <div class="stat-value">150</div>
      <div class="stat-label">Final Edges</div>
    </div>
    <div class="stat">
      <div class="stat-value">75</div>
      <div class="stat-label">Vertices</div>
    </div>
  </div>

  <div class="main-grid">
    <!-- Wolfram Side -->
    <div class="panel">
      <div class="panel-header wolfram">
        <h3>Wolfram Language</h3>
        <span class="badge">Source</span>
      </div>
      <div class="panel-content">
        <div class="rule-display">
          <div class="rule">{{{1,2},{2,3}} → {{2,3},{2,3},{3,4},{1,3}}}</div>
          <div class="label">Universe 1867 Rewriting Rule</div>
        </div>
        <div class="code-block"><span class="comment">(* Wolfram Language specification *)</span>
<span class="keyword">WolframModel</span>[
  {{{<span class="number">1</span>,<span class="number">2</span>},{<span class="number">2</span>,<span class="number">3</span>}} -> {{<span class="number">2</span>,<span class="number">3</span>},{<span class="number">2</span>,<span class="number">3</span>},{<span class="number">3</span>,<span class="number">4</span>},{<span class="number">1</span>,<span class="number">3</span>}}},
  {{<span class="number">1</span>,<span class="number">1</span>},{<span class="number">1</span>,<span class="number">1</span>}},  <span class="comment">(* initial: 2 self-loops *)</span>
  <span class="number">7</span>,               <span class="comment">(* 7 generations *)</span>
  <span class="string">"FinalStatePlot"</span>
]</div>
        <img src="universe1867_hypergraph.png" alt="Universe 1867 Hypergraph" style="margin-top: 12px;">
      </div>
    </div>

    <!-- Lean Side -->
    <div class="panel">
      <div class="panel-header lean">
        <h3>Lean 4 Formalization</h3>
        <span class="badge">Verified</span>
      </div>
      <div class="panel-content">
        <div class="code-block"><span class="comment">-- Lean 4 formalization of Universe 1867</span>
<span class="keyword">def</span> rule1867 (e1 e2 : <span class="type">Hyperedge</span>) (fresh : <span class="type">Nat</span>) :
    <span class="type">List Hyperedge</span> :=
  <span class="keyword">let</span> a := e1.src
  <span class="keyword">let</span> b := e1.tgt  <span class="comment">-- = e2.src</span>
  <span class="keyword">let</span> c := e2.tgt
  [⟨b, c⟩, ⟨b, c⟩, ⟨c, fresh⟩, ⟨a, c⟩]

<span class="keyword">def</span> initial : <span class="type">Hypergraph</span> :=
  [⟨<span class="number">1</span>, <span class="number">1</span>⟩, ⟨<span class="number">1</span>, <span class="number">1</span>⟩]

<span class="keyword">def</span> universe1867_gen7 : <span class="type">Hypergraph</span> :=
  evolveFinal initial <span class="number">7</span></div>

        <div class="theorem-box">
          <h4>Verified Theorems</h4>
          <div class="code-block"><span class="keyword">theorem</span> initial_edge_count :
    edgeCount initial = <span class="number">2</span> := <span class="keyword">rfl</span>

<span class="keyword">theorem</span> rule_produces_four_edges :
    (applyRule e1 e2 fresh).length = <span class="number">4</span> := <span class="keyword">rfl</span>

<span class="keyword">theorem</span> evolve_deterministic :
    evolve g n = evolve g n := <span class="keyword">rfl</span></div>
        </div>
      </div>
    </div>
  </div>

  <div class="evolution-strip">
    <h3>Evolution: 7 Generations (74 Events)</h3>
    <div class="frames">
      <div class="frame">
        <img src="frame_0.png" alt="Step 0">
        <div class="frame-label">Step 0: 2 edges</div>
      </div>
      <div class="frame">
        <img src="frame_1.png" alt="Step 1">
        <div class="frame-label">Step 1</div>
      </div>
      <div class="frame">
        <img src="frame_2.png" alt="Step 2">
        <div class="frame-label">Step 2</div>
      </div>
      <div class="frame">
        <img src="frame_3.png" alt="Step 3">
        <div class="frame-label">Step 3</div>
      </div>
      <div class="frame">
        <img src="frame_4.png" alt="Step 4">
        <div class="frame-label">Step 4</div>
      </div>
      <div class="frame">
        <img src="frame_5.png" alt="Step 5">
        <div class="frame-label">Step 5</div>
      </div>
      <div class="frame">
        <img src="frame_6.png" alt="Step 6">
        <div class="frame-label">Step 6</div>
      </div>
      <div class="frame">
        <img src="frame_7.png" alt="Step 7">
        <div class="frame-label">Step 7: 150 edges</div>
      </div>
    </div>
  </div>

  <div class="main-grid">
    <div class="panel">
      <div class="panel-header wolfram">
        <h3>3D Hypergraph View</h3>
      </div>
      <div class="panel-content">
        <img src="universe1867_3d.png" alt="Universe 1867 3D">
      </div>
    </div>
    <div class="panel">
      <div class="panel-header lean">
        <h3>Bridge Protocol</h3>
      </div>
      <div class="panel-content">
        <div class="code-block"><span class="comment">-- Binary export format</span>
<span class="comment">-- universe1867_hypergraph.bin: 2400 bytes</span>
<span class="comment">-- universe1867_lengths.bin: 1200 bytes</span>

<span class="comment">-- Lean can read and verify:</span>
<span class="keyword">def</span> toBridgeFormat (g : <span class="type">Hypergraph</span>) :
    <span class="type">List (List Nat)</span> :=
  g.map <span class="keyword">fun</span> e => [e.src, e.tgt]

<span class="comment">-- Matches Wolfram's Integer64 LE encoding</span>
<span class="comment">-- Lossless roundtrip verified</span></div>
        <p style="font-size: 11px; color: var(--dim); margin-top: 12px;">
          The binary protocol encodes hyperedges as Int64 little-endian arrays,
          enabling byte-identical roundtrips between Wolfram and Lean.
        </p>
      </div>
    </div>
  </div>

  <div style="text-align: center; margin-top: 24px; padding: 16px; border-top: 1px solid var(--border);">
    <p style="font-size: 11px; color: var(--dim);">
      Source: <a href="https://www.wolframphysics.org/universes/wm1867/" style="color: var(--accent);">wolframphysics.org/universes/wm1867</a>
      · Lean formalization: <code style="background: #111; padding: 2px 6px; border-radius: 3px;">HeytingLean.WolframPhysics.Universe1867</code>
    </p>
  </div>
</body>
</html>
